(this.webpackJsonphpa_web=this.webpackJsonphpa_web||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"ADD",(function(){return b})),n.d(a,"AddTodo",(function(){return k})),n.d(a,"DELETE",(function(){return O})),n.d(a,"DeleteTodo",(function(){return y}));var o=n(0),r=n.n(o),i=n(13),l=n.n(i),s=(n(56),n(18)),c=n(20),u=n(14),d=n(15),m=n(16),p=n(19),h=n(21),v=(n(61),n(47)),f=n.n(v),g=n(17),E=n.n(g),w=n(48),b="ADD_TODO";function k(e){return{type:b,payload:e}}var O="DELETE_TODO";function y(e){return{type:O,payload:e}}var M=n(49),A=n.n(M),L=(n(104),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,openings:[],next:null},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;E.a.get("https://www.ishopnewworld.co.nz/CommonApi/Delivery/GetClickCollectTimeSlot?id=".concat(this.props.id)).then((function(t){var n=t.data.slots.sort((function(e,t){return Date.parse(e.date)-Date.parse(t.date)}));e.setState({openings:n,next:e.nextOpenings(n),isLoading:!1})}))}},{key:"nextOpenings",value:function(e){for(var t=["07:30AM - 08:00AM","08:00AM - 08:30AM","09:00AM - 09:30AM","10:00AM - 10:30AM","11:00AM - 11:30AM","12:00PM - 12:30PM","01:00PM - 01:30PM","02:00PM - 02:30PM","03:00PM - 03:30PM"],n=0;n<e.length;n++){var a=e[n].timeSlots;a.sort((function(e,n){return t.indexOf(e.slot)-t.indexOf(n.slot)}));for(var o=0;o<a.length;o++){var r=e[n].timeSlots[o];if(r.available>0)return{slot:r.slot,date:e[n].date,available:r.available}}}return null}},{key:"renderNextOpenSpace",value:function(){return this.state.isLoading?r.a.createElement("div",null,"Loading..."):this.state.next?r.a.createElement("div",{className:"Supermarket-info"},r.a.createElement("div",null,r.a.createElement("span",null,"Next time slot: ")),r.a.createElement("div",null,A()(this.state.next.date,"YYYY-MM-DD").format("LL")),r.a.createElement("div",null,this.state.next.slot)):r.a.createElement("div",{className:"Supermarket-info"},r.a.createElement("div",null,r.a.createElement("span",null,"Next time slot: ")),r.a.createElement("div",null,"No time slots found"))}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("section",null,r.a.createElement("h1",null,this.props.name)),r.a.createElement("section",null,this.props.distance?r.a.createElement("div",null,"Distance: ",(this.props.distance/1e3).toFixed(2),"km away"):null,this.renderNextOpenSpace()))}}]),n}(r.a.Component)),D=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={title:"New World Order",supermarkets:[],isLoading:!0,userLocation:{latitude:0,longitude:0}},a.gotUserLocation=a.gotUserLocation.bind(Object(m.a)(a)),a}return Object(d.a)(n,[{key:"gotUserLocation",value:function(e){var t=this;E.a.get("https://www.ishopnewworld.co.nz/CommonApi/Store/GetStoreList").then((function(n){t.setState({supermarkets:n.data.stores,isLoading:!1,userLocation:{latitude:e.coords.latitude||0,longitude:e.coords.longitude||0}})}))}},{key:"componentDidMount",value:function(){navigator.geolocation.getCurrentPosition(this.gotUserLocation)}},{key:"renderSuperMarkets",value:function(){var e=this,t=this.state.supermarkets.map((function(t){var n=Object(w.getDistance)(e.state.userLocation,{latitude:t.latitude,longitude:t.longitude});return Object(c.a)({},t,{distance:n})})).filter((function(e){return e.distance<1e4})).sort((function(e,t){return e.distance-t.distance}));return 0===t.length?r.a.createElement("div",null,"No Supermarkets found?"):t.map((function(e){return r.a.createElement(L,Object.assign({key:e.id},e))}))}},{key:"renderIsLoading",value:function(){return this.state.isLoading?r.a.createElement("div",{className:"App-info"},"For this app to work, you will need to allow access to your location. This data is not stored, only to find the nearest stores to you."):r.a.createElement("div",{className:"App-supermarket-container"},this.renderSuperMarkets())}},{key:"render",value:function(){var e=this.state.title;return r.a.createElement("div",{className:"App-Container"},r.a.createElement(f.a,null,r.a.createElement("title",null,e)),r.a.createElement("header",null,r.a.createElement("h1",{className:"title"},e)),r.a.createElement("div",{className:"App-info"},"This webpage gets the next available time slot for all New World Supermarkets within 10km. You will still need to claim the instance, so there is no guarantee it is still available when you shop."),r.a.createElement("section",null,this.renderIsLoading()),r.a.createElement("footer",null,"Created by Aran Mason"))}}]),n}(r.a.Component),j=Object(s.b)((function(e){return{todo:e.todo.todo}}),(function(e){return{AddTodo:function(t){return e(k(t))}}}))(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=n(7),N=n(50),S=a,T={todo:[]};var C=Object(x.c)({todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.ADD:return Object(c.a)({},e);default:return e}}}),P=Object(x.d)(C,{},Object(x.a)(N.a));l.a.render(r.a.createElement(s.a,{store:P},r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},51:function(e,t,n){e.exports=n(105)},56:function(e,t,n){},61:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.e3845184.chunk.js.map