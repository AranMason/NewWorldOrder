(this.webpackJsonphpa_web=this.webpackJsonphpa_web||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"ADD",(function(){return w})),n.d(a,"AddTodo",(function(){return b})),n.d(a,"DELETE",(function(){return O})),n.d(a,"DeleteTodo",(function(){return M}));var o=n(0),r=n.n(o),i=n(13),l=n.n(i),s=(n(56),n(18)),c=n(14),u=n(15),d=n(16),m=n(19),p=n(20),h=(n(61),n(46)),v=n.n(h),f=n(17),g=n.n(f),E=n(47),w="ADD_TODO";function b(e){return{type:w,payload:e}}var O="DELETE_TODO";function M(e){return{type:O,payload:e}}var k=n(48),y=n.n(k),A=(n(104),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,openings:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.a.get("https://www.ishopnewworld.co.nz/CommonApi/Delivery/GetClickCollectTimeSlot?id=".concat(this.props.id)).then((function(t){var n=t.data;console.log(t),e.setState({openings:n.slots.sort((function(e,t){return Date.parse(e.date)-Date.parse(t.date)}))})}))}},{key:"renderNextOpenSpace",value:function(){for(var e=["07:30AM - 08:00AM","08:00AM - 08:30AM","09:00AM - 09:30AM","10:00AM - 10:30AM","11:00AM - 11:30AM","12:00PM - 12:30PM","01:00PM - 01:30PM","02:00PM - 02:30PM","03:00PM - 03:30PM"],t=this.state.openings,n=0;n<t.length;n++){var a=t[n].timeSlots;a.sort((function(t,n){return e.indexOf(t.slot)-e.indexOf(n.slot)}));for(var o=0;o<a.length;o++){var i=t[n].timeSlots[o];if(i.available>0)return r.a.createElement("div",{className:"Supermarket-info"},r.a.createElement("div",null,r.a.createElement("span",null,"Next time slot: ")),r.a.createElement("div",null,y()(t[n].date,"YYYY-MM-DD").format("LL")),r.a.createElement("div",null,i.slot))}}return r.a.createElement("div",{className:"Supermarket-info"},r.a.createElement("div",null,r.a.createElement("span",null,"Time slot: ")),r.a.createElement("div",null,"None"))}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("section",null,r.a.createElement("h1",null,this.props.name)),r.a.createElement("section",null,this.renderNextOpenSpace()))}}]),n}(r.a.Component)),D=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={title:"New World Order",supermarkets:[],isLoading:!0,userLocation:{latitude:0,longitude:0}},a.gotUserLocation=a.gotUserLocation.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"gotUserLocation",value:function(e){var t=this;g.a.get("https://www.ishopnewworld.co.nz/CommonApi/Store/GetStoreList").then((function(n){t.setState({supermarkets:n.data.stores,isLoading:!1,userLocation:{latitude:e.coords.latitude||0,longitude:e.coords.longitude||0}})}))}},{key:"componentDidMount",value:function(){navigator.geolocation.getCurrentPosition(this.gotUserLocation)}},{key:"renderIsLoading",value:function(){var e=this;return this.state.isLoading?r.a.createElement("div",{className:"App-info"},"For this app to work, you will need to allow access to your location. This data is not stored, only to find the nearest stores to you."):r.a.createElement("div",{className:"App-supermarket-container"},this.state.supermarkets.map((function(t){return Object(E.getDistance)(e.state.userLocation,{latitude:t.latitude,longitude:t.longitude})>5e3?null:r.a.createElement(A,Object.assign({key:t.id},t))})))}},{key:"render",value:function(){var e=this.state.title;return r.a.createElement("div",{className:"App-Container"},r.a.createElement(v.a,null,r.a.createElement("title",null,e)),r.a.createElement("header",null,r.a.createElement("h1",{className:"title"},e)),r.a.createElement("div",{className:"App-info"},"This webpage gets the next available time slot for all New World Supermarkets within 5km. You will still need to claim the instance, so there is no guarantee it is still available when you shop."),r.a.createElement("section",null,this.renderIsLoading()),r.a.createElement("footer",null,"Created by Aran Mason"))}}]),n}(r.a.Component),L=Object(s.b)((function(e){return{todo:e.todo.todo}}),(function(e){return{AddTodo:function(t){return e(b(t))}}}))(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var j=n(7),N=n(49),S=n(50),T=a,C={todo:[]};var P=Object(j.c)({todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.ADD:return Object(S.a)({},e);default:return e}}}),x=Object(j.d)(P,{},Object(j.a)(N.a));l.a.render(r.a.createElement(s.a,{store:x},r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},51:function(e,t,n){e.exports=n(105)},56:function(e,t,n){},61:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.8443a8b2.chunk.js.map