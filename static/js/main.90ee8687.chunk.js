(this.webpackJsonphpa_web=this.webpackJsonphpa_web||[]).push([[0],{104:function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"ADD",(function(){return w})),n.d(o,"AddTodo",(function(){return E})),n.d(o,"DELETE",(function(){return y})),n.d(o,"DeleteTodo",(function(){return M}));var a=n(0),r=n.n(a),i=n(15),c=n.n(i),s=(n(57),n(21)),l=n(16),u=n(17),d=n(22),h=n(19),p=n(18),m=n(23),f=(n(62),n(48)),v=n.n(f),g=n(20),O=n.n(g),b=n(49),w="ADD_TODO";function E(t){return{type:w,payload:t}}var y="DELETE_TODO";function M(t){return{type:y,payload:t}}var A=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={isLoading:!0,openings:[]},n}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this;O.a.get("https://www.ishopnewworld.co.nz/CommonApi/Delivery/GetClickCollectTimeSlot?id=".concat(this.props.id)).then((function(e){var n=e.data;console.log(e),t.setState({openings:n.slots.sort((function(t,e){return Date.parse(t.date)-Date.parse(e.date)}))})}))}},{key:"renderNextOpenSpace",value:function(){for(var t=["07:30AM - 08:00AM","08:00AM - 08:30AM","09:00AM - 09:30AM","10:00AM - 10:30AM","11:00AM - 11:30AM","12:00PM - 12:30PM","01:00PM - 01:30PM","02:00PM - 02:30PM","03:00PM - 03:30PM"],e=this.state.openings,n=0;n<e.length;n++){var o=e[n].timeSlots;o.sort((function(e,n){return t.indexOf(e.slot)-t.indexOf(n.slot)}));for(var a=0;a<o.length;a++){var i=e[n].timeSlots[a];if(i.available>0)return r.a.createElement("div",null,e[n].date," - ",i.slot)}}return null}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("section",null,r.a.createElement("h1",null,this.props.name)),r.a.createElement("section",null,this.renderNextOpenSpace()))}}]),e}(r.a.Component),j=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(d.a)(this,Object(h.a)(e).call(this,t))).state={title:"New World Order",supermarkets:[],isLoading:!0,userLocation:{latitude:0,longitude:0}},n.gotUserLocation=n.gotUserLocation.bind(Object(p.a)(n)),n}return Object(m.a)(e,t),Object(u.a)(e,[{key:"gotUserLocation",value:function(t){var e=this;O.a.get("https://www.ishopnewworld.co.nz/CommonApi/Store/GetStoreList").then((function(n){e.setState({supermarkets:n.data.stores,isLoading:!1,userLocation:{latitude:t.coords.latitude||0,longitude:t.coords.longitude||0}})}))}},{key:"componentDidMount",value:function(){navigator.geolocation.getCurrentPosition(this.gotUserLocation)}},{key:"renderIsLoading",value:function(){var t=this;return this.state.isLoading?r.a.createElement("div",null,"For this app to work, you will need to allow access to your location. This data is not stored, only to find the nearest stores to you."):r.a.createElement("div",{className:"supermarket-container"},this.state.supermarkets.map((function(e){return Object(b.getDistance)(t.state.userLocation,{latitude:e.latitude,longitude:e.longitude})>5e3?null:r.a.createElement(A,Object.assign({key:e.id},e))})))}},{key:"render",value:function(){var t=this.state.title;return r.a.createElement("div",{className:"App-Container"},r.a.createElement(v.a,null,r.a.createElement("title",null,t)),r.a.createElement("header",null,r.a.createElement("h1",{className:"title"},t)),r.a.createElement("section",null,this.renderIsLoading()),r.a.createElement("footer",null,"Created by Aran Mason"))}}]),e}(r.a.Component),k=Object(s.b)((function(t){return{todo:t.todo.todo}}),(function(t){return{AddTodo:function(e){return t(E(e))}}}))(j);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=n(9),L=n(50),C=n(51),P=o,S={todo:[]};var T=Object(D.c)({todo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P.ADD:return Object(C.a)({},t);default:return t}}}),N=Object(D.d)(T,{},Object(D.a)(L.a));c.a.render(r.a.createElement(s.a,{store:N},r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},52:function(t,e,n){t.exports=n(104)},57:function(t,e,n){},62:function(t,e,n){}},[[52,1,2]]]);
//# sourceMappingURL=main.90ee8687.chunk.js.map